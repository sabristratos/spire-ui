/**
 * Effects System - Visual Effect Tokens
 *
 * Optional visual effects including inner glow focus, texture overlays,
 * and gradient borders. Effects are opt-in via data-* attributes.
 *
 * Usage:
 *   <button data-focus-glow>Soft focus glow</button>
 *   <div data-texture="subtle">...</div>
 */

:root {
  --effect-focus-glow-color: var(--action-primary, var(--color-indigo-500));
  --effect-focus-glow-opacity: 0.4;
  --effect-focus-glow-spread: 3px;

  --effect-gradient-border-from: oklch(1 0 0 / 0.1);
  --effect-gradient-border-to: oklch(0 0 0 / 0.05);

  --effect-texture-opacity: 0.03;

  --effect-ripple-color: var(--color-white);
  --effect-ripple-opacity: 0.25;
  --effect-ripple-duration: 800ms;

  --effect-hover-reveal-size: 150px;
  --effect-hover-reveal-opacity: 0.08;
}

/**
 * Focus Glow Effect
 * Soft inner glow instead of standard outline ring.
 * Apply to interactive elements with data-focus-glow attribute.
 */
[data-focus-glow]:focus-visible {
  outline: none;
  box-shadow: inset 0 0 0 var(--effect-focus-glow-spread)
    oklch(from var(--effect-focus-glow-color) l c h / var(--effect-focus-glow-opacity));
}

/**
 * Texture Overlay
 * Optional noise/grain texture for surfaces.
 */
[data-texture='subtle']::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: var(--effect-texture-opacity);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  pointer-events: none;
  border-radius: inherit;
  mix-blend-mode: overlay;
}

[data-texture='subtle'] {
  position: relative;
}

[data-texture='medium']::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: calc(var(--effect-texture-opacity) * 2);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  pointer-events: none;
  border-radius: inherit;
  mix-blend-mode: overlay;
}

[data-texture='medium'] {
  position: relative;
}

/**
 * Gradient Border Utility
 * Creates a subtle light-to-dark gradient border effect.
 * Apply via data-gradient-border attribute.
 */
[data-gradient-border] {
  position: relative;
  background-clip: padding-box;
}

[data-gradient-border]::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(
    to bottom,
    var(--effect-gradient-border-from),
    var(--effect-gradient-border-to)
  );
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
}

/**
 * Ripple Effect Container
 * Provides CSS custom properties for JavaScript ripple effects.
 * Used in conjunction with useRipple composable.
 */
[data-ripple] {
  position: relative;
  overflow: hidden;
}

[data-ripple] .ui-ripple {
  position: absolute;
  border-radius: 50%;
  background: oklch(from var(--effect-ripple-color) l c h / var(--effect-ripple-opacity));
  transform: scale(0);
  animation: ripple-expand var(--effect-ripple-duration) var(--ease-out) forwards;
  pointer-events: none;
}

@keyframes ripple-expand {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

/**
 * Hover Reveal Gradient
 * Radial gradient spotlight following cursor on interactive elements.
 * Used in conjunction with useHoverReveal composable.
 */
[data-hover-reveal] {
  position: relative;
}

[data-hover-reveal]::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  opacity: 0;
  background: radial-gradient(
    var(--effect-hover-reveal-size) circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
    oklch(1 0 0 / var(--effect-hover-reveal-opacity)),
    transparent 40%
  );
  pointer-events: none;
  transition: opacity var(--duration-fast) var(--ease-default);
}

[data-hover-reveal]:hover::after {
  opacity: 1;
}

/**
 * Dark Theme Effect Adjustments
 */
[data-theme='dark'] {
  --effect-focus-glow-color: var(--color-indigo-400);
  --effect-focus-glow-opacity: 0.35;

  --effect-gradient-border-from: oklch(1 0 0 / 0.08);
  --effect-gradient-border-to: oklch(0 0 0 / 0.15);

  --effect-hover-reveal-opacity: 0.18;
  --effect-hover-reveal-size: 180px;
}
